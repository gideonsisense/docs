<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="8" MadCap:lastHeight="12242" MadCap:lastWidth="704">
    <head>
        <title>Connecting to Hadoop via Hive | Sisense | Documentation</title>
    </head>
    <body>
        <h1>Connecting to Hadoop via Hive</h1>
        <p>The <MadCap:variable name="Variables.CompanyName" /> ODBC Driver with SQL Connector for Apache Hive enables standard SQL-92 access directly to Apache Hive distributions. It efficiently maps SQL to HiveQL delivering full SQL application functionality and real-time analytic and reporting capabilities to viewers.</p>
        <h2 class="notoc">Downloading and Connecting the Sisense Hive ODBC Driver</h2>
        <ol>
            <li>
                <a href="https://download.sisense.com/drivers/odbc/Hive/x64/Sisense Hive ODBC Driver x64 v2.0.0.5.exe">Download</a> and install the <MadCap:variable name="Variables.CompanyName" /> Hive ODBC Driver.</li>
            <li>In <MadCap:variable name="Variables.ECM" />, click <span class="bold">Add Data</span> and then, <span class="bold">Generic ODBC Driver</span>.</li>
            <li>Select <span class="bold">DSN</span>. If a DSN file has already been created, select it in the list, and click Test Connection. If you need to add a DSN, see <a href="#Adding">Adding a DSN</a>. If your connection has been set up, you can click <span class="bold">OK</span> and review the tables generated by the <MadCap:variable name="Variables.CompanyName" /> Hive ODBC driver.
<br /><![CDATA[            ]]><img src="../../../Resources/Images/odbc-PROPS.png" class="thumblarge" /><br />            OR<br />         Select <span class="bold">Connection String (DSN-Less)</span> and enter your Connection String. Click <span class="bold">Test Connection</span>.  For more information, see <a href="#nodsn">Connecting without a DSN</a>.</li>
        </ol>
        <h2 class="notoc">
            <a name="Adding">
            </a>Adding a DSN</h2>
        <p>If a DSN has not yet been created, you must add the DSN manually.</p>
        <p>
            <span class="bold">Note</span>: To add a DSN you must run the Sisense ElastiCube Manager as an administrator.</p>
        <p class="bold">To add a DSN:</p>
        <ol>
            <li>Click <span class="bold">Add DSN</span>.<br /><img src="../../../Resources/Images/odbc-PROPS (1).png" class="thumblarge" /></li>
            <li>Select the <span class="bold">System Data Source</span> option. The created file applies to all users in a specific machine only. Click <span class="bold">Next</span>.<br /><img src="../../../Resources/Images/createnewdataSource (2).png" class="thumblarge" /></li>
            <li>Select the <MadCap:variable name="Variables.CompanyName" /> Hive ODBC Driver, and click <span class="bold">Next</span>.</li>
            <li>Click <span class="bold">Finish</span>.</li>
            <li>In the <MadCap:variable name="Variables.CompanyName" /> Hive ODBC Driver DSN Setup window, do the following:<br /><img src="../../../Resources/Images/hive-Setup.png" class="thumblarge" /><br /><table><thead><tr><th>Field</th><th>Procedure</th></tr></thead><tbody><tr><td>Data Source Name</td><td>Enter your name for the DSN that is to be displayed in the DSN dropdown list.</td></tr><tr><td>Description</td><td>Enter your description of the DSN.</td></tr><tr><td>Hive Server Type</td><td><p>Select the server type used by your data source.</p><p><span class="bold">Note</span>: If you are connecting through Apache ZooKeeper, then Hive Server 1 is not supported.</p></td></tr><tr><td>Service Discovery Mode</td><td><p>Select the Service Discovery Mode. There are two possible options you can select:</p><p><span class="bold">No Service Discovery</span>: The driver connects to Hive without using the ZooKeeper service.</p><p><span class="bold">ZooKeeper</span>: The driver discovers Hive Server 2 services via the ZooKeeper service.</p></td></tr><tr><td>Host(s)</td><td><p>If you selected No Service Discovery above as the Service Discovery Mode, then enter the IP address or hostname of the Hive server.</p><p>OR</p><p>If you selected ZooKeeper as the Service Discovery Mode, enter a comma-separated list of ZooKeeper servers.</p><p>Use the following format, where zk_host is the IP address or hostname of the ZooKeeper server and zk_port is the number of the port that the ZooKeeper server uses: zk_host1:zk_port1,zk_host2:zk_port2 .</p></td></tr><tr><td>Port</td><td>If you selected No Service Discovery above as the Service Discovery Mode, then enter the number of the TCP port on which the Hive server is listening. Otherwise, do not type a value in the field.</td></tr><tr><td>Database</td><td>Enter the name of the database schema to use when a schema is not explicitly specified in a query. You can still issue queries on other schemas by explicitly specifying the schema in the query. To inspect your databases and determine the appropriate schema to use, type the show databases command at the Hive command prompt.</td></tr><tr><td>ZooKeeper Namespace</td><td>If you selected ZooKeeper as the Service Discovery Mode, enter the namespace on ZooKeeper under which Hive Server 2 znodes are added. Otherwise, do not type a value in the field.</td></tr><tr><td>Authentication</td><td><p>Some Hive servers are configured to require authentication for access. To connect to a Hive server, you must configure the <MadCap:variable name="Variables.CompanyName" /> Hive ODBC Driver to use the authentication mechanism that matches the access requirements of the server and provides the necessary credentials</p><p>Hive Server 1 does not support authentication.</p><p>Most default configurations of Hive Server 2 require User Name authentication. To verify the authentication mechanism that you need to use for your connection, check the configuration of your Hadoop/Hive distribution.</p></td></tr><tr><td>Mechanism</td><td>If your Hive server is configured to use authentication, select the appropriate authentication mechanism and provide the necessary credentials and authentication settings in the fields below the list.</td></tr><tr><td>Realm</td><td><p>This field is available when Kerberos is selected as your authentication mechanism.</p><p>Enter the realm of the Hive Server 2 host.</p><p>If your Kerberos configuration already defines the realm of the Hive Server 2 host as the default realm, then you do not need to configure this option.</p></td></tr><tr><td>Host FQDN</td><td>This field is available when Kerberos is selected as your authentication mechanism.Enter the HS2HostFQDN key to the fully qualified domain name of the Hive Server 2 host.</td></tr><tr><td>Service Name</td><td>This field is available when Kerberos is selected as your authentication mechanism.Enter the HS2KrbServiceName key to the service name of the Hive Server 2 host.</td></tr><tr><td>User Name</td><td><p>This field is available when User Name, User Name and Password, or Windows Azure is selected as your authentication mechanism.</p><p>The user name that you use to access Hive Server 2.</p></td></tr><tr><td>Password</td><td><p>This field is available when User Name and Password or Windows Azure is selected as your authentication mechanism.</p><p>The password corresponding to the user name that you provided in the User Name field (the UID key).</p></td></tr><tr><td>Delegation UID</td><td><p>Enter the name of the user to be delegated in the Delegation UID field.</p><p>The Delegation UID represents a user that is different than the authenticated user for the connection.</p><p>This option is applicable only when connecting to a Hive Server 2 instance that supports this feature.</p></td></tr><tr><td>Thrift Transport</td><td><p>Select the transport protocol to use in the Thrift layer. For Hive Server 1, select Binary. When using an authentication mechanism, the <span class="bold">Binary</span> transport protocol is not supported.</p><p>For Hive Server 2, select  <span class="bold">SASL</span>.</p><p>If you select <span class="bold">HTTP</span>, the HTTP Options button is enabled. See Configuring HTTP Options for more information. </p><p>To configure client-server verification over SSL, click SSL Options. See SSL Options for more information.</p></td></tr></tbody></table><br /></li>
            <li>(Optional) To configure advanced driver options, click <span class="bold">Advanced Options</span>. For more information, see Advanced Options.</li>
            <li>(Optional) To configure logging behavior for the driver, click <span class="bold">Logging Options</span>. For more information, see Logging Options.</li>
            <li>Click <span class="bold">Test</span>. A pop window is displayed that indicates the connection was successful.</li>
            <li>Click <span class="bold">OK</span>.</li>
            <li>In the ODBC Connectivity Properties window, click <span class="bold">Test Connection</span>.</li>
            <li>Click <span class="bold">OK</span> to save and close the ODBC Data Source Administrator.</li>
        </ol>
        <h3 class="notoc">Configuring HTTP Options</h3>
        <p>You can configure options such as custom headers when using the HTTP transport</p>
        <p>protocol in the Thrift layer.</p>
        <p class="bold">To configure HTTP options:</p>
        <ol>
            <li>In the <MadCap:variable name="Variables.CompanyName" /> Hive ODBC Driver DSN Setup window, select <span class="bold">HTTP</span> as the HTTP transport protocol from the Thrift Transport list.</li>
            <li>Click <span class="bold">HTTP Options</span>. The HTTP Properties window is displayed.<br /><img src="../../../Resources/Images/http-Properties.png" class="thumblarge" /></li>
            <li>In the <span class="bold">HTTP Path</span> field, enter the partial URL corresponding to the Hive server.</li>
            <li>Click <span class="bold">Add</span>. The Edit Property window is displayed.<br /><img src="../../../Resources/Images/editproperties (1).png" /></li>
            <li>In the <span class="bold">Key</span> and <span class="bold">Value</span> fields, enter the appropriate keys and values and click <span class="bold">OK</span>.</li>
            <li>After you add an HTTP header, you can edit or delete the header by clicking <span class="bold">Edit</span> or <span class="bold">Delete</span>.</li>
            <li>Click <span class="bold">OK</span>.</li>
        </ol>
        <h4 class="notoc">SSL Options</h4>
        <p>You can configure verification between the client and the Hive server over SSL.</p>
        <p class="bold">To configure SSL verification:</p>
        <ol>
            <li>In the <MadCap:variable name="Variables.CompanyName" /> Hive ODBC Driver DSN Setup window, click <span class="bold">SSL Options</span>. The SSL Options window is displayed.<br /><img src="../../../Resources/Images/hivessLProperties (1).png" class="thumblarge" /></li>
            <li>Select <span class="bold">Enable SSL</span>.</li>
            <li>Select the <span class="bold">Allow Self-signed Server Certificate</span> checkbox to allow self-signed certificates from the server.</li>
            <li>Select the <span class="bold">Allow Common Name Host Name Mismatch</span> checkbox to allow the common name of a CA-issued SSL certificate to not match the host name of the Hive server.</li>
            <li>In the <span class="bold">Trusted Certificates</span> field, enter the path or click <span class="bold">Browse</span> and navigate to the location of your PEM file if you want to the driver to load your SSL certificates when verifying the server.<br />OR <br />To use the trusted CA certificates PEM file that is installed with the driver, leave the Trusted Certificates field empty.</li>
            <li>Select the <span class="bold">Two-Way</span> SSL checkbox if you want to configure two-way SSL verification. The Client authentication fields are enabled.</li>
            <li>In the <span class="bold">Client Certificate File</span> field, enter the path or click <span class="bold">Browse</span> and navigate to the location of your PEM containing the client’s certificate.</li>
            <li>In the <span class="bold">Client Private Key File</span> field, enter the path or click <span class="bold">Browse</span> and navigate to the location of your file containing the client’s private key.</li>
            <li>In the <span class="bold">Client Private Key Password</span> field, if the private key file is protected with a password, enter the password. Select the <span class="bold">Save Password (Encrypted)</span> checkbox to save the password.</li>
            <li>Click <span class="bold">OK</span>.</li>
        </ol>
        <h4 class="notoc">Advanced Options</h4>
        <p>You can configure advanced driver by clicking <span class="bold">Advanced Options</span> in the <MadCap:variable name="Variables.CompanyName" /> Hive ODBC Driver DSN Setup window.</p>
        <p>This displays the Advanced Options window from which you can configure the following options:<br /><img src="../../../Resources/Images/hiveadvanced (1).png" class="thumblarge" /></p>
        <table>
            <thead>
                <tr>
                    <th>Field</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Use Native Query</td>
                    <td>
                        <p>Select to disable the SQL Connector feature.</p>
                        <p>Select Use Native Query to disable the SQL Connector feature and allow the driver to execute HiveQL directly.</p>
                        <p>When Use Native Query is selected, the driver does not transform the queries emitted by an application, so the native query is used.</p>
                        <p>When Use Native Query is disabled, the driver transforms the queries emitted by an application and converts them into an equivalent form for Hive.</p>
                    </td>
                </tr>
                <tr>
                    <td>Fast SQLPrepare</td>
                    <td>Select to defer query execution to SQLExecute.</td>
                </tr>
                <tr>
                    <td>Driver Config Take Precedence</td>
                    <td>Select to allow driver-wide configurations to take precedence over connection and DSN settings.</td>
                </tr>
                <tr>
                    <td>Use Async Exec</td>
                    <td>
                        <p>Select to use the asynchronous version of the API call against Hive for executing a query.</p>
                        <p>This option is applicable only when connecting to a Hive cluster running Hive 0.12.0 or later.</p>
                    </td>
                </tr>
                <tr>
                    <td>Get Tables With Query</td>
                    <td>
                        <p>Select to retrieve the names of tables in a database by using the SHOW TABLES query.</p>
                        <p>This option is applicable only when connecting to Hive Server 2.</p>
                    </td>
                </tr>
                <tr>
                    <td>Unicode SQL character types</td>
                    <td>Select to enable the driver to return SQL_WVARCHAR instead of SQL_VARCHAR for STRING and VARCHAR columns, and SQL_WCHAR instead of SQL_CHAR for CHAR columns.</td>
                </tr>
                <tr>
                    <td>Show System Table</td>
                    <td>Select to enable the driver to return the hive_system table for catalog function calls such as SQLTables and SQLColumns.</td>
                </tr>
                <tr>
                    <td>Use only SSPI</td>
                    <td>Select to handle Kerberos authentication using the SSPI plugin instead of Kerberos by default.</td>
                </tr>
                <tr>
                    <td>Rows fetched per block</td>
                    <td>Enter the number of rows to be fetched per block.</td>
                </tr>
                <tr>
                    <td>Default string column length</td>
                    <td>Enter the maximum data length for STRING columns.</td>
                </tr>
                <tr>
                    <td>Binary column length</td>
                    <td>Enter the maximum data length for BINARY columns.</td>
                </tr>
                <tr>
                    <td>Decimal column</td>
                    <td>Enter the maximum number of digits to the right of the decimal point for numeric data types.</td>
                </tr>
                <tr>
                    <td>Async Exec Poll Interval (ms)</td>
                    <td>Enter the time in milliseconds between each poll for the query execution status. This option is applicable only to HDInsight clusters.</td>
                </tr>
                <tr>
                    <td>Socket Timeout (s)</td>
                    <td>Define the amount of time until the connection times out. The default amount of time is 30 seconds.</td>
                </tr>
            </tbody>
        </table>
        <ol>
            <li>Click <span class="bold">Server Side Properties</span> to configure the driver to apply configuration properties to the Hive server. For more information, see <a href="#Configur">Configuring Server Side Properties</a>.</li>
            <li>Click <span class="bold">OK</span>.</li>
        </ol>
        <h3 class="notoc">
            <a name="Configur">
            </a>Configuring Server-Side Properties</h3>
        <p>You can use the driver to apply configuration properties to the Hive server.</p>
        <p>The <MadCap:variable name="Variables.CompanyName" /> ODBC Driver with SQL Connector for Apache Hive allows you to set server-side properties via a DSN. Server-side properties specified in a DSN affect only the connection that is established using the DSN.</p>
        <p class="bold">To create a server-side property:</p>
        <ol>
            <li>In the <MadCap:variable name="Variables.CompanyName" /> Hive ODBC Driver DSN Setup window, click <span class="bold">Advanced Options</span> &gt; <span class="bold">Side Server Properties</span>. The Server Side Properties window is displayed.<br /><img src="../../../Resources/Images/hiveserverside (1).png" class="thumblarge" /></li>
            <li>Click <span class="bold">Add</span>. The Edit Property window is displayed.<br /><img src="../../../Resources/Images/editproperties (2).png" class="thumblarge" /></li>
            <li>In the <span class="bold">Key</span> and <span class="bold">Value</span> fields, enter the appropriate keys and values and click <span class="bold">OK</span>. <br />For a list of all Hadoop and Hive server-side properties that your implementation supports, type set -v at the Hive CLI command line or Beeline. You can also execute the set -v query after connecting using the driver. After you add your properties, you can edit or delete the properties by clicking <span class="bold">Edit</span> or <span class="bold">Delete</span>.</li>
            <li>Click <span class="bold">OK</span>.</li>
            <li>Select the<span class="bold"> Apply properties with queries</span> checkbox to configure the driver to apply each server-side property by executing a query when opening a session to the Hive server.<br />OR<br />Clear the Apply Server Side Properties with Queries checkbox to configure the driver to use a more efficient method for applying server-side properties that does not involve additional network round-tripping.<br />The more efficient method is not available for Hive Server 1, and it might not be compatible with some Hive Server 2 builds. If the server-side properties do not take effect when the checkbox is clear, then select the checkbox.</li>
            <li>Select the <span class="bold">Convert Key Name to Lower Case</span> checkbox to force the driver to convert server-side property key names to all lower case characters.</li>
            <li>Click <span class="bold">OK</span>.</li>
        </ol>
        <h4 class="notoc">Logging Options</h4>
        <p>You can configure logging options by clicking <span class="bold">Logging Options</span> in the <MadCap:variable name="Variables.CompanyName" /> Hive ODBC Driver DSN Setup window. This displays the Logging Options window.</p>
        <p>
            <img src="../../../Resources/Images/hivelog (1).png" class="thumblarge" />
        </p>
        <p>The ODBC Data Source Administrator provides tracing functionality, which you can activate to help troubleshoot issues.</p>
        <span class="bold">Important</span>: Only enable logging long enough to capture an issue. Logging decreases performance and can consume a large quantity of disk space.<p>The driver allows you to set the amount of detail included in log files. The table below  lists the logging levels provided by the <MadCap:variable name="Variables.CompanyName" /> ODBC Driver with SQL Connector for Hive, in order from least verbose to most verbose.</p><p>In the Logging Options window, you can configure the following information:</p><table><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody><tr><td>Log Level</td><td><p>Select the Log Level. There are seven possible options:</p><p><span class="bold">LOG_OFF</span>: Disables all logging.</p><p><span class="bold">LOG_FATAL</span>: Logs very severe error events that lead the driver to abort.</p><p><span class="bold">LOG_ERROR</span>: Logs error events that might still allow the driver to continue running.</p><p><span class="bold">LOG_WARNING</span>: Logs potentially harmful situations.</p><p><span class="bold">LOG_INFO</span>: Logs general information that describes the progress of the driver.</p><p><span class="bold">LOG_DEBUG</span>: Logs detailed information that is useful for debugging the driver.</p><p><span class="bold">LOG_TRACE</span>: Logs more detailed information than the DEBUG level.</p></td></tr><tr><td>Log Path</td><td>Enter the full path to the folder where you want to save log files.<br />OR<br />Click <span class="bold">Browse</span> and select the folder where you want to save log files.</td></tr><tr><td>Log Namespace</td><td>Enter a name for the log.</td></tr></tbody></table><h3 class="notoc">Connecting without a DSN<a name="nodsn"></a></h3><p>Some client applications provide support for connecting to a data source using a driver without a DSN. To configure a DSN-less connection, you can use a connection string.</p><p>The following is an example of a connection string for a DSN-less connection:</p><p><span class="code">Driver=DriverNameOrFile;HOST=MyHiveServer;PORT=PortNumber; Schema=DefaultSchema;HiveServerType=ServerType</span></p><p>The table below provides a list of possible keys you can add to your string and their descriptions:</p><table><thead><tr><th>Key Name</th><th>Description</th></tr></thead><tbody><tr><td>DriverNameOrFile</td><td>The absolute path of the shared object file for the driver.</td></tr><tr><td>MyHiveServer</td><td>The IP address or host name of the Hive server.</td></tr><tr><td>PortNumber</td><td>The number of the port that the Hive server uses.</td></tr><tr><td>DefaultSchema</td><td>The database schema to use when a schema is not explicitly specified in a query.</td></tr><tr><td>ServerType</td><td>The server type, either 1 (for Hive Server 1) or 2 (for Hive Server 2).</td></tr></tbody></table><h3 class="notoc">Adding Hive Tables to your Project</h3><p>After setting up the DSN or the DSN-less connection, the Add table from Hive Tables window is displayed.</p><p>From this window, you add your Hive tables to your <MadCap:variable name="Variables.ECM" />. In addition, you can view the SQL syntax in the Query Preview section and click Edit to customize it.</p><p class="bold">To add Hive Tables to your Project:</p><ol><li>Connect to Hive via the <MadCap:variable name="Variables.CompanyName" /> ODBC Tool.</li><li>Add your data source.</li><li>In the Add table from Hive Tables window, select the table you want to add to the <MadCap:variable name="Variables.ECM" />.</li><li>Click <span class="bold">Add</span>. The selected tables are added to your <MadCap:variable name="Variables.ECM" />.</li></ol></body>
</html>