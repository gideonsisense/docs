<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="4" MadCap:lastHeight="3462" MadCap:lastWidth="921">
    <head>
        <title>Segmenting Google Analytics Data | Sisense | Documentation</title>
    </head>
    <body>
        <h1>Segmenting Google Analytics Data</h1>
        <p>A segment is a subset of your Analytics data. For example, of your entire set of users, one segment might be users from a particular country or city.</p>
        <p>You can have predefined segments created by Google or custom segments created by you. You can segment your data when querying Google Analytics. This is useful to prevent Google from sampling your data or return data associated with specific segments.</p>
        <p class="bold">To request data associated from a segment:</p>
        <ol>
            <li>Open the <a href="https://ga-dev-tools.appspot.com/query-explorer/">Google Analytics Query Explorer</a>.</li>
            <li>In the segment field, enter the name of your segment. As you begin to type, all the relevant segments are displayed. Below the segment name is Google Analytics ID.</li>
            <img src="../../../Resources/Images/gaid (1).png" />
            <li>Copy the Google Analytics ID (gaid::X).</li>
            <li>Open the Google Analytics tables.xml file saved in <span class="code">%ProgramData%\Sisense\PrismServer\LocalRepository2.0\Resources\Google\Analytics</span></li>
            <li>In the XML file, paste the following code under the relevant table to be segmented. For Example:
              <p class="code">&lt;table name="Traffic, Daily Report" accumulate_by="ga:date"&gt;</p><p class="code">&lt;segment&gt;</p><p class="code"> &lt;![CDATA[gaid::-4]]&gt;</p><p class="code">&lt;/segment&gt;</p><p class="code"> &lt;fields&gt;</p><p class="code"> &lt;field id="Site"&gt;&lt;/field&gt;</p><p class="code"> &lt;field id="ga:date"&gt;&lt;/field&gt;</p><p class="code"> &lt;field id="ga:bounces"&gt;&lt;/field&gt;</p><p class="code"> &lt;field id="ga:entrances"&gt;&lt;/field&gt;</p><p class="code"> &lt;field id="ga:exits"&gt;&lt;/field&gt;</p><p class="code"> &lt;field id="ga:newUsers"&gt;&lt;/field&gt;</p><p class="code"> &lt;field id="ga:sessionDuration"&gt;&lt;/field&gt;</p><p class="code"> &lt;field id="ga:users"&gt;&lt;/field&gt;</p><p class="code"> &lt;field id="ga:sessions"&gt;&lt;/field&gt;</p><p class="code">&lt;/fields&gt;</p><p class="code">&lt;/table&gt;</p></li>
            <li>Save your changes to the XML file. The next time you return data, the segmented data is returned.</li>
        </ol>
        <h2 class="notoc">Filtering Google Analytics Data</h2>
        <p>
            <MadCap:variable name="Variables.CompanyName" /> allows you to filter your data returned from Google Analytics according to View-level filters. For example, you can use filters to exclude traffic from particular IP addresses, include only data from specific subdomains.</p>
        <p>By using a filter in <MadCap:variable name="Variables.CompanyName" /> you increase the number of dimensions you can import to a table as a workaround to Google Analytics 7 dimension limitation for any query.</p>Filtering your incoming hits permanently includes, excludes, or alters those hits in that view, according to the type of filter. Therefore, you should ALWAYS maintain an unfiltered view of your data so you always have access to your full data set.<p class="bold">To apply filters to your query:</p><ol><li>Open the Google Analytics tables.xml file saved in %ProgramData%\Sisense\PrismServer\LocalRepository2.0\Resources\Google\Analytics</li><li>In the XML file, paste the following code under the relevant table to be filtered.  For Example:</li><p class="code">&lt;table name="Traffic, Daily Report" accumulate_by="ga:date"&gt;</p><p class="code">&lt;filter&gt;</p><p class="code">&lt;![CDATA[ga:userType!=New Visitor]]&gt;</p><p class="code">&lt;/filter&gt;</p><p class="code">&lt;fields&gt;</p><p class="code"> &lt;field id="Site"&gt;&lt;/field&gt;</p><p class="code"> &lt;field id="ga:date"&gt;&lt;/field&gt;</p><p class="code"> &lt;field id="ga:bounces"&gt;&lt;/field&gt;</p><p class="code"> &lt;field id="ga:entrances"&gt;&lt;/field&gt;</p><p class="code"> &lt;field id="ga:exits"&gt;&lt;/field&gt;</p><p class="code"> &lt;field id="ga:newUsers"&gt;&lt;/field&gt;</p><p class="code"> &lt;field id="ga:sessionDuration"&gt;&lt;/field&gt;</p><p class="code"> &lt;field id="ga:users"&gt;&lt;/field&gt;</p><p class="code"> &lt;field id="ga:sessions"&gt;&lt;/field&gt;</p><p class="code">&lt;/fields&gt;</p><p class="code">&lt;/table&gt;</p><li>Save your changes to the XML file. The next time you return data, the filtered data is returned.</li></ol><h2 class="notoc">Sorting Google Analytics Data</h2><p>You can define the sort order and the direction of data returned from Google Analytics according to A list of metrics and dimensions indicating the sorting order and sorting direction for the returned data.</p><ul><li>Sorting order is specified by the left to right order of the metrics and dimensions listed.</li><li>Sorting direction defaults to ascending and can be changed to descending by using a minus sign (-) prefix on the requested field.</li></ul><p>For example, “What are my top countries, and which browsers do they use most?”</p><p class="code">&lt;sort&gt;</p><p class="code"> ga:country,ga:browser</p><p class="code">&lt;/sort&gt;</p><p>This example sorts the data by country and browser in ascending order. To return the data in descending order, add the prefix “-” as shown below:</p><p class="code">&lt;sort&gt;</p><p class="code"> -ga:country,-ga:browser</p><p class="code">&lt;/sort&gt;</p><p class="bold">To sort your Google Analytics data:</p><ol><li>Open the Google Analytics tables.xml file saved in <span class="code">%ProgramData%\Sisense\PrismServer\LocalRepository2.0\Resources\Google\Analytics</span></li><li>In the XML file, paste the following code under the relevant table to be sorted. For Example:</li><p class="code">&lt;table name="Traffic, Daily Report" accumulate_by="ga:date"&gt;</p><p class="code">&lt;sort&gt;</p><p class="code">-ga:sessions,-ga:date</p><p class="code">&lt;/sort&gt;</p><p class="code">&lt;fields&gt;</p><p class="code"> &lt;field id="Site"&gt;&lt;/field&gt;</p><p class="code"> &lt;field id="ga:date"&gt;&lt;/field&gt;</p><p class="code"> &lt;field id="ga:entrances"&gt;&lt;/field&gt;</p><p class="code"> &lt;field id="ga:exits"&gt;&lt;/field&gt;</p><p class="code"> &lt;field id="ga:newUsers"&gt;&lt;/field&gt;</p><p class="code"> &lt;field id="ga:pageviews"&gt;&lt;/field&gt;</p><p class="code"> &lt;field id="ga:users"&gt;&lt;/field&gt;</p><p class="code"> &lt;field id="ga:sessions"&gt;&lt;/field&gt;</p><p class="code">&lt;/fields&gt;</p><p class="code">&lt;/table&gt;</p><li>Save your changes to the XML file. The next time you return data, the sorted data is returned.</li></ol></body>
</html>